using System;
using System.Collections;
using System.Collections.Generic;
using UnityEngine;

[RequireComponent(typeof(Health))]
public class OnHurtInvulnerability : MonoBehaviour
{
    [SerializeField][Range(0, 5)] float invulnerabilityTime = 1f;
    Health Health => GetComponent<Health>();

    void Start()
    {
        Health.OnHurt += OnHurt;
    }

    private void OnHurt(int damage, Vector3 pos)
    {
        StopAllCoroutines();
        StartCoroutine(Invulnerability());
    }

    IEnumerator Invulnerability()
    {
        Health.invincible = true;
        yield return new WaitForSeconds(invulnerabilityTime);
        Health.invincible = false;
    }
}
